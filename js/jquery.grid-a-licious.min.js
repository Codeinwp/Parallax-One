/**
 * jQuery Grid-A-Licious(tm) v3.01
 *
 * Terms of Use - jQuery Grid-A-Licious(tm)
 * under the MIT (http://www.opensource.org/licenses/mit-license.php) License.
 *
 * Copyright 2008-2012 Andreas PihlstrÃ¶m (Suprb). All rights reserved.
 * (http://suprb.com/apps/gridalicious/)
 *
 */
// Debouncing function from John Hann
// http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
// Copy pasted from http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/
!function(i,t){var o=function(t,o,s){var e;return function(){function r(){s||t.apply(n,a),e=null}var n=this,a=arguments,h=i(window).width();return i("body").hasClass("woocommerce")&&768>h?(i(".woocommerce ul.products li").css("width","100%"),i(".woocommerce ul.products li").css("margin-right","0"),i(".woocommerce ul.products li").css("display","block"),i(".woocommerce ul.products li").css("margin","30px auto"),!1):(e?clearTimeout(e):s&&t.apply(n,a),void(e=setTimeout(r,o||150)))}};jQuery.fn[t]=function(i){return i?this.bind("resize",o(i)):this.trigger(t)}}(jQuery,"smartresize"),function(i){i.Gal=function(t,o){this.element=i(o),this._init(t)},i.Gal.settings={selector:".item",width:225,gutter:0,animate:!1,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}},i.Gal.prototype={_init:function(t){var o=this;this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.setOptions,this.cols=0,this.itemCount=0,this.prependCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.boxWidth=this.box.width(),this.options=i.extend(!0,{},i.Gal.settings,t),this.gridArr=i.makeArray(this.box.find(this.options.selector)),this.isResizing=!1,this.w=0,this.boxArr=[];var s=i(window).width();i("body").hasClass("woocommerce")&&768>s?(this._setCols(),this._renderGrid("append"),i(this.box).addClass("gridalicious"),i(window).smartresize(function(){o.resize()}),i(".woocommerce ul.products li").css("width","100%"),i(".woocommerce ul.products li").css("margin-right","0"),i(".woocommerce ul.products li").css("display","block"),i(".woocommerce ul.products li").css("margin","30px auto")):(this._setCols(),this._renderGrid("append"),i(this.box).addClass("gridalicious"),i(window).smartresize(function(){o.resize()}))},_setName:function(i,t){return t=t?t:"",i?this._setName(--i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},_setCols:function(){if(this.cols=Math.floor(this.box.width()/this.options.width),i("body").hasClass("woocommerce")&&(this.cols=4),this.cols<1&&(this.cols=1),i("body").hasClass("woocommerce"))var t=Math.floor(2*this.options.gutter/(this.cols-1))+this.options.gutter;diff=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols,w=i("body").hasClass("woocommerce")?(this.options.width+diff-this.options.gutter)/this.box.width()*100:(this.options.width+diff)/this.box.width()*100,this.w=w;var o=this.box.find(this.options.selector).length;if(o>2)if(i("body").hasClass("woocommerce"))for(var s=0;s<this.cols;s++)if(s==this.cols-1){var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",marginRight:0,paddingBottom:t,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}else{var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",marginRight:t,paddingBottom:t,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}else for(var s=0;s<this.cols;s++){var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}else if(i("body").hasClass("woocommerce"))for(var s=0;s<this.cols;s++)if(s==this.cols-1){var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",marginRight:0,paddingBottom:t,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}else{var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",marginRight:t,paddingBottom:t,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}else for(var s=0;s<this.cols;s++){var e=i("<li></li>").addClass("galcolumn").attr("id","item"+s+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,"float":"none",display:"inline-block","vertical-align":"top"});this.box.append(e)}this.box.find(i("#clear"+this.name)).remove();var r=i("<li></li>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(r)},_renderGrid:function(t,o,s){var e=[],r=[],n=0,a=(this.prependCount,this.appendCount),h=this.options.gutter,d=this.cols,l=this.name,c=(i(".galcolumn").width(),{});if(i("body").hasClass("woocommerce"))var p=Math.floor(2*this.options.gutter/(this.cols-1))+this.options.gutter;o?(r=o,"append"==t&&(a+=s,n=this.appendCount),"prepend"==t&&(this.isPrepending=!0,n=Math.round(s%d),0>=n&&(n=d)),"renderAfterPrepend"==t&&(a+=s,n=s)):(r=this.gridArr,a=i(this.gridArr).size());var m;for(m=0;d>m;m++)c[m]=0;i.each(r,function(o,s){var r,a,m,u,b=i(s),g="100%";if(b.hasClass("not-responsive")&&(g="auto"),i("body").hasClass("woocommerce")?b.css({marginBottom:p,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({height:"auto",display:"block","margin-left":"auto","margin-right":"auto"}):b.css({marginBottom:h,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({height:"auto",display:"block","margin-left":"auto","margin-right":"auto"}),"prepend"==t)n--,i("#item"+n+l).prepend(b),e.push(b),0==n&&(n=d);else{if(r=b.outerHeight(!0),a=0,m=c[a],0!=m)for(u=1;d>u;u++){if(0===c[u]){a=u;break}c[u]<m&&(m=c[u],a=u)}i("#item"+a+l).append(b),e.push(b),c[a]+=b.outerHeight(!0)}}),this.appendCount=a,this.itemCount=n,"append"==t||"prepend"==t?("prepend"==t&&this._updateAfterPrepend(this.gridArr,r),this._renderItem(e),this.isPrepending=!1):this._renderItem(this.gridArr);var u=this.box.children(".galcolumn");i.each(u,function(t,o){var s=i(o);s.html()||s.addClass("display-none")})},_collectItems:function(){var t=[];return i(this.box).find(this.options.selector).each(function(){t.push(i(this))}),t},_renderItem:function(t){var o=this.options.animationOptions.speed,s=this.options.animationOptions.effect,e=this.options.animationOptions.duration,r=this.options.animationOptions.queue,n=this.options.animate,a=this.options.animationOptions.complete,h=0,d=0;n!==!0||this.isResizing?(i.each(t,function(t,o){i(o).css({opacity:"1",filter:"alpha(opacity=1)"})}),this.ifCallback&&a.call(t)):(r===!0&&"fadeInOnAppear"==s?(this.isPrepending&&t.reverse(),i.each(t,function(s,r){setTimeout(function(){i(r).animate({opacity:"1.0"},e),d++,d==t.length&&a.call(void 0,t)},h*o),h++})):r===!1&&"fadeInOnAppear"==s&&(this.isPrepending&&t.reverse(),i.each(t,function(o,s){i(s).animate({opacity:"1.0"},e),d++,d==t.length&&this.ifCallback&&a.call(void 0,t)})),r!==!0||s||i.each(t,function(o,s){i(s).css({opacity:"1",filter:"alpha(opacity=1)"}),d++,d==t.length&&this.ifCallback&&a.call(void 0,t)}))},_updateAfterPrepend:function(t,o){var s=this.gridArr;i.each(o,function(i,t){s.unshift(t)}),this.gridArr=s},resize:function(){this.box.width()!==this.boxWidth&&(this.box.find(i(".galcolumn")).remove(),this._setCols(),this.ifCallback=!1,this.isResizing=!0,this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1,this.boxWidth=this.box.width())},append:function(t){var o=this.gridArr,s=this.gridArrPrepend;i.each(t,function(i,t){o.push(t),s.push(t)}),this._renderGrid("append",t,i(t).size())},prepend:function(t){this.ifCallback=!1,this._renderGrid("prepend",t,i(t).size()),this.ifCallback=!0}},i.fn.gridalicious=function(t,o){return this.each("string"==typeof t?function(){var s=i.data(this,"gridalicious");s[t].apply(s,[o])}:function(){i.data(this,"gridalicious",new i.Gal(t,this))}),this}}(jQuery);